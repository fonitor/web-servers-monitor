{"version":3,"sources":["../../../src/library/mysql/index.js"],"names":["Knex","client","connection","host","sqlConfig","port","database","user","password","debug","pool","max","min","idleTimeoutMillis","reapIntervalMillis","acquireConnectionTimeout","log","error","message","Logger","info"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAEA,MAAMA,IAAI,GAAG,mBAAK;AACdC,EAAAA,MAAM,EAAE,OADM;AAEdC,EAAAA,UAAU,EAAE;AACRC,IAAAA,IAAI,EAAEC,eAAUD,IADR;AAERE,IAAAA,IAAI,EAAED,eAAUC,IAFR;AAGRC,IAAAA,QAAQ,EAAEF,eAAUE,QAHZ;AAIRC,IAAAA,IAAI,EAAEH,eAAUG,IAJR;AAKRC,IAAAA,QAAQ,EAAEJ,eAAUI;AALZ,GAFE;AASdC,EAAAA,KAAK,EAAE,KATO;AAUdC,EAAAA,IAAI,EAAE;AACFC,IAAAA,GAAG,EAAE,EADH;AAEFC,IAAAA,GAAG,EAAE,CAFH;AAGF;AACA;AACA;AACA;AACAC,IAAAA,iBAAiB,EAAE,GAPjB;AAQF;AACAC,IAAAA,kBAAkB,EAAE;AATlB,GAVQ;AAqBdC,EAAAA,wBAAwB,EAAE,KArBZ;AAsBdC,EAAAA,GAAG,EAAE;AACDC,IAAAA,KAAK,CAACC,OAAD,EAAU;AACXC,sBAAOC,IAAP,CAAa,cAAaF,OAAQ,EAAlC;AACH;;AAHA;AAtBS,CAAL,CAAb;eA6BelB,I","sourcesContent":["import knex from 'knex'\nimport sqlConfig from '../../config/mysql'\nimport Logger from '../logger'\n\nconst Knex = knex({\n    client: 'mysql',\n    connection: {\n        host: sqlConfig.host,\n        port: sqlConfig.port,\n        database: sqlConfig.database,\n        user: sqlConfig.user,\n        password: sqlConfig.password\n    },\n    debug: false,\n    pool: {\n        max: 10,\n        min: 0,\n        // 由于存在资源池, 导致句柄不被释放, 程序不能退出\n        // 因此将最小句柄数设为0, 每100ms检查一次是否有超过120ms未被使用的资源\n        // 以便句柄的及时回收\n        // free resouces are destroyed after this many milliseconds\n        idleTimeoutMillis: 100,\n        // how often to check for idle resources to destroy\n        reapIntervalMillis: 150\n    },\n    acquireConnectionTimeout: 60000,\n    log: {\n        error(message) {\n            Logger.info(`数据库操作异常 => ${message}`)\n        }\n    }\n})\n\nexport default Knex"],"file":"index.js"}