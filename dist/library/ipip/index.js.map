{"version":3,"sources":["../../../src/library/ipip/index.js"],"names":["ipDatabaseUri","path","resolve","__dirname","DatabaseClient","datx","City","isIp","ip","test","ip2Locate","country","province","city","res","findSync","_","get"],"mappings":";;;;;;;AAGA;;AACA;;AACA;;;;AALA;AACA;AACA;AAKA,IAAIA,aAAa,GAAGC,cAAKC,OAAL,CAAaC,SAAb,EAAwB,oCAAxB,CAApB;;AAEA,IAAIC,cAAc,GAAG,IAAIC,kBAAKC,IAAT,CAAcN,aAAd,CAArB;;AAEA,SAASO,IAAT,CAAcC,EAAd,EAAkB;AACd,SAAO,sDAAsDC,IAAtD,CAA2DD,EAA3D,CAAP;AACH;AAED;;;;;;AAIA,SAASE,SAAT,CAAmBF,EAAnB,EAAuB;AACnB,MAAIG,OAAO,GAAG,EAAd;AACA,MAAIC,QAAQ,GAAG,EAAf;AACA,MAAIC,IAAI,GAAG,EAAX;;AACA,MAAIN,IAAI,CAACC,EAAD,CAAJ,KAAa,KAAjB,EAAwB;AACpB,WAAO;AACHG,MAAAA,OADG;AACM;AACTC,MAAAA,QAFG;AAEO;AACVC,MAAAA,IAHG,CAGE;;AAHF,KAAP;AAKH;;AACD,MAAIC,GAAG,GAAGV,cAAc,CAACW,QAAf,CAAwBP,EAAxB,CAAV;AACAG,EAAAA,OAAO,GAAGK,gBAAEC,GAAF,CAAMH,GAAN,EAAW,CAAC,CAAD,CAAX,EAAgB,EAAhB,CAAV;AACAF,EAAAA,QAAQ,GAAGI,gBAAEC,GAAF,CAAMH,GAAN,EAAW,CAAC,CAAD,CAAX,EAAgB,EAAhB,CAAX;AACAD,EAAAA,IAAI,GAAGG,gBAAEC,GAAF,CAAMH,GAAN,EAAW,CAAC,CAAD,CAAX,EAAgB,EAAhB,CAAP;AACA,SAAO;AACHH,IAAAA,OADG;AACM;AACTC,IAAAA,QAFG;AAEO;AACVC,IAAAA,IAHG,CAGE;;AAHF,GAAP;AAKH;;eAEc;AACXH,EAAAA;AADW,C","sourcesContent":["// 引入ipip-datx模块\n// 基于ipip.net提供的地址库数据\n// 最后更新时间: 2018-09-19\nimport path from 'path'\nimport datx from 'ipip-datx'\nimport _ from 'lodash'\n\nlet ipDatabaseUri = path.resolve(__dirname, './ip2locate_ipip.net_20180910.datx')\n\nlet DatabaseClient = new datx.City(ipDatabaseUri)\n\nfunction isIp(ip) {\n    return /^(([1-9]?\\d|1\\d\\d|2[0-4]\\d|25[0-5])(\\.(?!$)|$)){4}$/.test(ip)\n}\n\n/**\n * 获取省市区\n * @param {*} ip \n */\nfunction ip2Locate(ip) {\n    let country = ''\n    let province = ''\n    let city = ''\n    if (isIp(ip) === false) {\n        return {\n            country, //  国家\n            province, //  省\n            city //  市\n        }\n    }\n    let res = DatabaseClient.findSync(ip)\n    country = _.get(res, [0], '')\n    province = _.get(res, [1], '')\n    city = _.get(res, [2], '')\n    return {\n        country, //  国家\n        province, //  省\n        city //  市\n    }\n}\n\nexport default {\n    ip2Locate\n}\n"],"file":"index.js"}